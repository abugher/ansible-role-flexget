---
#install_packages:
#  - 'gcc'
#  - 'g++'
#  - 'libc6-dev'
#  - 'python3-dev'
#  - 'cargo'
install_python_packages:
  - 'flexget'
symlinks:
  - owner:              'root'
    group:              'root'
    src:                '/usr/local/python-packages/flexget/bin/flexget'
    dest:               '/usr/local/bin/flexget'
  - owner:              'root'
    group:              'root'
    src:                '/usr/local/python-packages/flexget'
    dest:               '/usr/local/python-packages/transmission-rpc'
create_files:
  - path:               '/var/lib/transmission-daemon/.flexget'
    state:              'directory'
    owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0755'
  - path:               '/storage/bittorrent/content/nightvale'
    state:              'directory'
    owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0755'
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    state:              'touch'
    path:               '/var/log/flexget_execute.log'
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    state:              'touch'
    path:               '/var/log/flexget_execute.ret'
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    state:              'touch'
    path:               '/var/log/flexget_vacuum.log'
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    state:              'touch'
    path:               '/var/log/flexget_vacuum.ret'
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    state:              'touch'
    path:               '/var/log/flexget_failed_clear.log'
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    state:              'touch'
    path:               '/var/log/flexget_failed_clear.ret'
install_files:
  - owner:              'debian-transmission'
    group:              'debian-transmission'
    mode:               '0644'
    src:                '../../../sensitive-ansible/roles/flexget/files/conf/flexget/config.yml'
    dest:               '/var/lib/transmission-daemon/.flexget/config.yml'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '../../../sensitive-ansible/roles/flexget/files/bin/flexget_execute_cronjob'
    dest:               '/usr/local/bin/flexget_execute_cronjob'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '../../../sensitive-ansible/roles/flexget/files/bin/flexget_execute_now'
    dest:               '/usr/local/bin/flexget_execute_now'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '../../../sensitive-ansible/roles/flexget/files/bin/flexget_failed_clear_cronjob'
    dest:               '/usr/local/bin/flexget_failed_clear_cronjob'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '../../../sensitive-ansible/roles/flexget/files/bin/flexget_failed_clear_now'
    dest:               '/usr/local/bin/flexget_failed_clear_now'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '../../../sensitive-ansible/roles/flexget/files/bin/flexget_vacuum_cronjob'
    dest:               '/usr/local/bin/flexget_vacuum_cronjob'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '../../../sensitive-ansible/roles/flexget/files/bin/flexget_vacuum_now'
    dest:               '/usr/local/bin/flexget_vacuum_now'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '../../../sensitive-ansible/roles/flexget/files/cron.d/flexget_vacuum'
    dest:               '/etc/cron.d/flexget_vacuum'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '../../../sensitive-ansible/roles/flexget/files/cron.d/flexget_execute'
    dest:               '/etc/cron.d/flexget_execute'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '../../../sensitive-ansible/roles/flexget/files/cron.d/flexget_failed_clear'
    dest:               '/etc/cron.d/flexget_failed_clear'
commands:
  - command:            /usr/local/bin/update_python_packages
